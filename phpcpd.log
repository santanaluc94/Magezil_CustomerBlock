<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
  <duplication lines="30" tokens="83">
    <file path="/shared/httpd/magento-two/app/code/Magezil/CustomerBlock/Setup/Patch/Data/InstallCustomerCanPurchase.php" line="26"/>
    <file path="/shared/httpd/magento-two/app/code/Magezil/CustomerBlock/Setup/Patch/Data/InstallCustomerCanReview.php" line="26"/>
    <file path="/shared/httpd/magento-two/app/code/Magezil/CustomerBlock/Setup/Patch/Data/InstallCustomerHasListToCompare.php" line="26"/>
    <file path="/shared/httpd/magento-two/app/code/Magezil/CustomerBlock/Setup/Patch/Data/InstallCustomerHasWishlist.php" line="26"/>
    <file path="/shared/httpd/magento-two/app/code/Magezil/CustomerBlock/Setup/Patch/Data/InstallIsCustomerBlockedAttribute.php" line="26"/>
    <codefragment>    private ModuleDataSetupInterface $moduleDataSetup;
    private CustomerSetupFactory $customerSetupFactory;
    private SetFactory $attributeSetFactory;

    public function __construct(
        ModuleDataSetupInterface $moduleDataSetup,
        CustomerSetupFactory $customerSetupFactory,
        SetFactory $attributeSetFactory
    ) {
        $this-&gt;moduleDataSetup = $moduleDataSetup;
        $this-&gt;customerSetupFactory = $customerSetupFactory;
        $this-&gt;attributeSetFactory = $attributeSetFactory;
    }

    public function apply(): void
    {
        $customerSetup = $this-&gt;customerSetupFactory-&gt;create(['setup' =&gt; $this-&gt;moduleDataSetup]);

        $customerEntity = $customerSetup-&gt;getEavConfig()-&gt;getEntityType(Customer::ENTITY);
        $attributeSetId = $customerEntity-&gt;getDefaultAttributeSetId();

        $attributeSet = $this-&gt;attributeSetFactory-&gt;create();
        $attributeGroupId = $attributeSet-&gt;getDefaultGroupId($attributeSetId);

        $customerSetup-&gt;addAttribute(
            Customer::ENTITY,
            self::ATTR_NAME,
            [
                'type' =&gt; 'int',
                'label' =&gt; 'Customer Can Purchase',
</codefragment>
  </duplication>
</pmd-cpd>
